{"ast":null,"code":"var _jsxFileName = \"D:\\\\KavtechHRM\\\\frontend\\\\src\\\\Components\\\\accountBox\\\\loginForm.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from \"react\";\nimport { Field, useFormik } from \"formik\";\nimport jwt_decode from 'jwt-decode';\nimport { BoldLink, BoxContainer, FieldContainer, FieldError, FormContainer, FormError, Input, MutedLink, SubmitButton } from \"./common\";\nimport { Marginer } from \"../marginer\";\nimport * as yup from \"yup\";\nimport axios from \"axios\";\nimport { AccountContext } from \"./accountContext\";\nimport PropTypes from 'prop-types';\nimport { useHistory } from \"react-router-dom\"; // const validationSchema = yup.object({\n//   email: yup.string().required(),\n//   password: yup.string().required(),\n// });\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function LoginForm(props) {\n  _s();\n\n  const {\n    switchToSignup\n  } = useContext(AccountContext);\n  const [error, setError] = useState(null); //Authentication\n\n  let [authTokens, setAuthTokens] = useState(localStorage.getItem('authTokens') ? JSON.parse(localStorage.getItem('authTokens')) : null);\n  let [user, setUser] = useState(localStorage.getItem('authTokens') ? jwt_decode(localStorage.getItem('authTokens')) : null);\n  const history = useHistory();\n  let {\n    loginUser\n  } = useContext(AccountContext);\n  let contextData = {\n    user: user,\n    loginUser: loginUser\n  }; // localStorage.getItem('authTokens') ? JSON.parse(localStorage.getItem('authTokens')) :  null)\n  //Authentication\n\n  const onSubmit = async values => {\n    setError(null);\n    const response = await axios.post(\"http://127.0.0.1:8000/Kavtech/login/\", values).catch(err => {\n      if (err && err.response) setError(err.response.data.message);\n    });\n    let data = await response.json;\n\n    if (response.status === 200) {\n      setAuthTokens(data);\n      setUser(data.access);\n      localStorage.setItem('authTokens', JSON.stringify(data));\n      history.push('/');\n      alert(\"Login Success !!!\");\n    } else {\n      alert(\"Something Went Wrong!!!\");\n    }\n  };\n\n  const formik = useFormik({\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    validateOnBlur: true,\n    onSubmit // validationSchema: validationSchema,\n\n  });\n  return /*#__PURE__*/_jsxDEV(BoxContainer, {\n    children: user ? /*#__PURE__*/_jsxDEV(BoldLink, {\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 14\n    }, this) : /*#__PURE__*/_jsxDEV(BoxContainer, {\n      children: [/*#__PURE__*/_jsxDEV(FormError, {\n        children: error ? error : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(FormContainer, {\n        onSubmit: formik.handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(FieldContainer, {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            name: \"email\",\n            placeholder: \"Email\",\n            value: formik.values.email,\n            onChange: formik.handleChange,\n            onBlur: formik.handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(FieldError, {\n            children: formik.touched.email && formik.errors.email ? formik.errors.email : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(FieldContainer, {\n          children: [/*#__PURE__*/_jsxDEV(Input, {\n            name: \"password\",\n            type: \"password\",\n            placeholder: \"Password\",\n            value: formik.values.password,\n            onChange: formik.handleChange,\n            onBlur: formik.handleBlur\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(FieldError, {\n            children: formik.touched.password && formik.errors.password ? formik.errors.password : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(MutedLink, {\n          href: \"#\",\n          children: \"Forgot Password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n          direction: \"vertical\",\n          margin: \"1em\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n          type: \"submit\",\n          disabled: !formik.isValid,\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Marginer, {\n        direction: \"vertical\",\n        margin: 5\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(MutedLink, {\n        href: \"#\",\n        children: [\"Dont have an Account?\", /*#__PURE__*/_jsxDEV(BoldLink, {\n          href: \"#\",\n          onClick: switchToSignup,\n          children: \"sign up\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 6\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LoginForm, \"UlMGpVuqFgh6RkZ0M0CfgdzZdaQ=\", false, function () {\n  return [useHistory, useFormik];\n});\n\n_c = LoginForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"sources":["D:/KavtechHRM/frontend/src/Components/accountBox/loginForm.jsx"],"names":["React","useState","useContext","Field","useFormik","jwt_decode","BoldLink","BoxContainer","FieldContainer","FieldError","FormContainer","FormError","Input","MutedLink","SubmitButton","Marginer","yup","axios","AccountContext","PropTypes","useHistory","LoginForm","props","switchToSignup","error","setError","authTokens","setAuthTokens","localStorage","getItem","JSON","parse","user","setUser","history","loginUser","contextData","onSubmit","values","response","post","catch","err","data","message","json","status","access","setItem","stringify","push","alert","formik","initialValues","email","password","validateOnBlur","handleSubmit","handleChange","handleBlur","touched","errors","isValid"],"mappings":"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","sourcesContent":["import React, { useState ,useContext } from \"react\";\r\nimport { Field, useFormik } from \"formik\";\r\n\r\nimport jwt_decode from 'jwt-decode'\r\nimport {\r\n  BoldLink,\r\n  BoxContainer,\r\n  FieldContainer,\r\n  FieldError,\r\n  FormContainer,\r\n  FormError,\r\n  Input,\r\n  MutedLink,\r\n  SubmitButton,\r\n} from \"./common\";\r\nimport { Marginer } from \"../marginer\";\r\nimport * as yup from \"yup\";\r\nimport axios from \"axios\";\r\nimport { AccountContext } from \"./accountContext\";\r\nimport PropTypes from 'prop-types';\r\nimport { useHistory } from \"react-router-dom\";\r\n// const validationSchema = yup.object({\r\n//   email: yup.string().required(),\r\n//   password: yup.string().required(),\r\n// });\r\n\r\nexport function LoginForm(props) {\r\n\r\n  const { switchToSignup } = useContext(AccountContext);\r\n  const [error, setError] = useState(null);\r\n  //Authentication\r\n  let [ authTokens, setAuthTokens] = useState(localStorage.getItem('authTokens') ? JSON.parse(localStorage.getItem('authTokens')) :  null)\r\n  let [user, setUser] = useState(localStorage.getItem('authTokens') ? jwt_decode(localStorage.getItem('authTokens')) :  null)\r\n  const history = useHistory();\r\n  let {loginUser} = useContext(AccountContext)\r\n  let contextData = {\r\n    user:user,\r\n    loginUser:loginUser\r\n}\r\n// localStorage.getItem('authTokens') ? JSON.parse(localStorage.getItem('authTokens')) :  null)\r\n\r\n  //Authentication\r\n  const onSubmit = async (values) => {\r\n    setError(null);\r\n    const response = await axios\r\n      .post(\"http://127.0.0.1:8000/Kavtech/login/\", values)\r\n      .catch((err) => {\r\n        if (err && err.response) setError(err.response.data.message);\r\n      });\r\n      let data = await response.json\r\n\r\n      if (response.status === 200){\r\n        setAuthTokens(data)\r\n        setUser(data.access)\r\n        localStorage.setItem('authTokens', JSON.stringify(data))\r\n        history.push('/')\r\n        alert(\"Login Success !!!\")\r\n\r\n      }else{\r\n        alert(\"Something Went Wrong!!!\")\r\n\r\n      }\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: { email: \"\", password: \"\" },\r\n    validateOnBlur: true,\r\n    onSubmit,\r\n    // validationSchema: validationSchema,\r\n  });\r\n\r\n  return (\r\n    <BoxContainer>\r\n    {user ? (<BoldLink>Logout</BoldLink> )\r\n    : \r\n    (  \r\n     <BoxContainer>\r\n  \r\n      <FormError>{error ? error : \"\"}</FormError>\r\n      <FormContainer onSubmit={formik.handleSubmit}>\r\n        <FieldContainer>\r\n          <Input\r\n            name=\"email\"\r\n            placeholder=\"Email\"\r\n            value={formik.values.email}\r\n            onChange={formik.handleChange}\r\n            onBlur={formik.handleBlur}\r\n          />\r\n          {\r\n            <FieldError>\r\n              {formik.touched.email && formik.errors.email\r\n                ? formik.errors.email\r\n                : \"\"}\r\n            </FieldError>\r\n          }\r\n        </FieldContainer>\r\n        <FieldContainer>\r\n          <Input\r\n            name=\"password\"\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n            value={formik.values.password}\r\n            onChange={formik.handleChange}\r\n            onBlur={formik.handleBlur}\r\n          />\r\n          {\r\n            <FieldError>\r\n              {formik.touched.password && formik.errors.password\r\n                ? formik.errors.password\r\n                : \"\"}\r\n            </FieldError>\r\n          }\r\n        </FieldContainer>\r\n        <MutedLink href=\"#\">Forgot Password?</MutedLink>\r\n        <Marginer direction=\"vertical\" margin=\"1em\" />\r\n        <SubmitButton type=\"submit\" disabled={!formik.isValid}>\r\n          Login\r\n        </SubmitButton>\r\n      </FormContainer>\r\n      <Marginer direction=\"vertical\" margin={5} />\r\n      <MutedLink href=\"#\">\r\n        Dont have an Account?\r\n        <BoldLink href=\"#\" onClick={switchToSignup}>\r\n          sign up\r\n        </BoldLink>\r\n      </MutedLink>\r\n    </BoxContainer> )}\r\n    </BoxContainer>\r\n    \r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}